(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(32542)}])},32542:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(85893),s=n(214),r=n.n(s),i=n(47568),o=n(70655),u=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"error","name":"NftMarketplace__AlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__NoProceeds","inputs":[]},{"type":"error","name":"NftMarketplace__NotApprovedForMarketplace","inputs":[]},{"type":"error","name":"NftMarketplace__NotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__NotOwner","inputs":[]},{"type":"error","name":"NftMarketplace__PriceMustBeAboveZero","inputs":[]},{"type":"error","name":"NftMarketplace__PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"error","name":"NftMarketplace__TransferFailed","inputs":[]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCanceled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"user"}],"outputs":[{"type":"uint256","name":"proceeds"}]},{"type":"function","name":"listItem","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"inputs":[],"outputs":[]}]'),d=n(67225),c=n(25675),p=n.n(c),l=n(4774),m=n(79449),f=n(71577),y=n(98982),h=n(56645),b=n(45605),v=n(10133),g=n(55678),x=n(67976),k=n(61744),N=n(67294);function j(e){var t=e.props,n=e.isVisible,s=e.hideModal,r=this,u=function(e,t){"updateListing"===t&&V(),"cancelListing"===t&&G(),U(!0),e&&e.stopPropagation()},d=function(e){console.log(e),"ACTION_REJECTED"===e.code?g.Am.error("Transaction rejected."):g.Am.error("Error updating listing."),c()},c=function(e){s(),U(!1),e&&e.stopPropagation()},p=function(e){T(""===e.target.value?"0":e.target.value),""!==e.target.value&&e.target.value<=0?(B(!1),F("Price must be greater than 0.")):""!==e.target.value&&k.parseEther(e.target.value).toString()===M?(B(!1),F("The new price is the same as the old one.")):""===e.target.value?B(!1):(B(!0),F(""))},j=t.marketplaceAddress,A=t.marketplaceAbi,w=t.nftAddress,I=t.tokenName,E=t.tokenId,M=t.price,_=(0,N.useState)("0"),S=_[0],T=_[1],L=(0,N.useState)(!1),C=L[0],B=L[1],O=(0,N.useState)(""),P=O[0],F=O[1],Z=(0,N.useState)(!1),D=Z[0],U=Z[1],J=(0,x.yL)().network,R=(0,l.N)(j,A,"updateListing",[w,E,k.parseEther(S)],{onSuccess:K,onError:d},n&&w&&""!==E&&S&&"0"!==S),V=R.write,X=R.isLoading,Y=(0,l.N)(j,A,"cancelListing",[w,E],{onSuccess:K,onError:d},n&&w&&""!==E),G=Y.write,H=Y.isLoading;function K(e){return $.apply(this,arguments)}function $(){return($=(0,i.Z)(function(e){return(0,o.__generator)(this,function(t){switch(t.label){case 0:return[4,g.Am.promise(e.wait(1),{pending:"Updating listing...",success:"Listing updated!",error:"Error updating listing."})];case 1:return t.sent(),c(),T("0"),[2]}})})).apply(this,arguments)}return(0,a.jsx)(m.Z,{title:"Update Listing",open:n,onOk:function(e){return u(e,"updateListing")},onCancel:c,onClose:c,okText:"Update",footer:[(0,a.jsx)(f.Z,{type:"primary",danger:!0,loading:H||D,onClick:function(e){return u(e,"cancelListing")},children:"Cancel listing"},"unlist"),(0,a.jsxs)("div",{className:"wrap-btn",children:[(0,a.jsx)(f.Z,{onClick:c,children:"Cancel"},"back"),(0,a.jsx)(f.Z,{type:"primary",disabled:!C,loading:X||D,onClick:function(){return u(r,"updateListing")},children:"Ok"},"submit")]}),],children:(0,a.jsxs)("div",{className:"update-listing",children:[(0,a.jsxs)("div",{className:"title",children:[(0,a.jsxs)("div",{className:"name",children:[I," "]}),(0,a.jsxs)("div",{className:"token-id",children:["#",E]})]}),(0,a.jsx)(y.Z,{type:"number",autoFocus:!0,placeholder:"New price",prefix:"maticmum"===J.name?(0,a.jsx)(v.T,{name:"matic",width:20,style:"icon"}):(0,a.jsx)(v.T,{name:"eth",width:20,style:"icon"}),addonAfter:(0,a.jsx)(h.Z,{title:"Enter the new price (in ".concat("maticmum"===J.name?"MATIC":"ETH",")"),children:(0,a.jsx)(b.Z,{style:{color:"rgba(255,255,255,.75)"}})}),onChange:p,min:0}),(0,a.jsx)("div",{className:"error-message",children:P})]})})}var A=function(e){var t;return Number(parseFloat(k.formatUnits(e,18)).toFixed(4))},w=n(2593);function I(e){var t=e.props,n=e.isVisible,s=e.hideModal,r=function(e){F(),_(!0),e.stopPropagation()},u=function(e){console.error(e.message),"ACTION_REJECTED"===e.code?g.Am.error("Transaction rejected."):g.Am.error("Error buying item."),d()},d=function(e){s(),_(!1),e&&e.stopPropagation()},c=t.marketplaceAddress,p=t.marketplaceAbi,f=t.nftAddress,y=t.tokenName,h=t.tokenId,b=t.price,k=(0,x.yL)().network,j=(0,x.mA)().address,I=(0,x.KQ)({addressOrName:j}).data,E=(0,N.useState)(!1),M=E[0],_=E[1],S=(0,N.useState)(!0),T=S[0],L=S[1],C=(0,N.useState)(0),B=C[0],O=C[1],P=(0,l.N)(c,p,"buyItem",[f,h,{value:b}],{onSuccess:function(e){return D.apply(this,arguments)},onError:u},n&&f&&""!==h&&b),F=P.write,Z=P.isLoading;function D(){return(D=(0,i.Z)(function(e){return(0,o.__generator)(this,function(t){switch(t.label){case 0:return[4,g.Am.promise(e.wait(1),{pending:"Buying item...",success:"Item bought!",error:"Error buying item."})];case 1:return t.sent(),d(),[2]}})})).apply(this,arguments)}return P.isSuccess,(0,N.useEffect)(function(){if(b&&I){var e=w.O$.from(I.value),t=w.O$.from(b);e.lt(t)?(L(!1),O(t.sub(e).toString())):(L(!0),O(0))}},[b]),(0,a.jsx)(m.Z,{title:"Buy item",open:n,onOk:r,onCancel:d,onClose:s,okButtonProps:{loading:Z||M,disabled:!T},okText:"Buy",children:(0,a.jsxs)("div",{className:"buy-item",children:[(0,a.jsxs)("div",{className:"title",children:[(0,a.jsxs)("div",{className:"name",children:[y," "]}),(0,a.jsxs)("div",{className:"token-id",children:["#",h]})]}),(0,a.jsx)("div",{className:"price",children:(0,a.jsxs)("div",{className:"value",children:["maticmum"===k.name?(0,a.jsx)(v.T,{name:"matic",width:20,style:"color"}):(0,a.jsx)(v.T,{name:"eth",width:20,style:"color"}),A(b)]})}),I?(0,a.jsxs)("div",{className:"balance",children:["You have","maticmum"===k.name?(0,a.jsx)(v.T,{name:"matic",width:20,style:"icon"}):(0,a.jsx)(v.T,{name:"eth",width:20,style:"icon"}),(0,a.jsxs)("span",{className:"ether-value",children:[" ",A(I.value.toString())," "]}),"in your wallet."]}):"",!T&&(0,a.jsxs)("div",{className:"error-message",children:["You need"," ",(0,a.jsx)("span",{className:"ether-value",children:A(B)})," ","more ","maticmum"===k.name?"MATIC":"ETH"," to buy this item."]})]})})}var E=n(26303);function M(e){var t,n=e.nftAttributes,s=e.marketplaceAddress,r=function(e){"update"===e?Y(!0):"buy"===e&&K(!0)},c=n.nftAddress,m=n.tokenId,f=n.price,y=n.seller,h=(0,x.mA)().address,b=(0,x.yL)().network,k=(0,N.useState)(!1),w=k[0],M=k[1],_=(0,N.useState)(""),S=_[0],T=_[1],L=(0,N.useState)(""),C=L[0],B=L[1],O=(0,N.useState)(""),P=O[0],F=O[1],Z=(0,N.useState)(!1),D=Z[0],U=Z[1],J=(0,N.useState)(!1),R=(J[0],J[1]),V=(0,N.useState)(!1),X=V[0],Y=V[1],G=(0,N.useState)(!1),H=G[0],K=G[1],$=(0,l.p)(c,d,"tokenURI",[m],m);function q(){return z.apply(this,arguments)}function z(){return(z=(0,i.Z)(function(){var e,t,n,a;return(0,o.__generator)(this,function(t){switch(t.label){case 0:if(!$)return[3,6];return e={},[4,fetch($.replace("ipfs://","https://ipfs.io/ipfs/")).catch(function(e){console.log(e)})];case 1:if(!((n=t.sent())&&429===n.status))return[3,2];return console.log("Too many requests"),e.uri="",e.name="",e.description="",M(!1),setTimeout(function(){q()},5e3),[3,5];case 2:if(!n)return[3,4];return[4,n.json()];case 3:return a=t.sent(),e.uri=a.image.replace("ipfs://","https://ipfs.io/ipfs/"),e.name=a.name,e.description=a.description,M(!0),[3,5];case 4:e.uri="",e.name="",e.description="",M(!1),g.Am.error("Error fetching NFT data. Please refresh."),t.label=5;case 5:T(e.uri),B(e.name),F(e.description),t.label=6;case 6:return U(h.toLowerCase()===y.toLowerCase()||void 0===y),[2]}})})).apply(this,arguments)}return(0,N.useEffect)(function(){h&&q(),Y(!1),K(!1)},[h]),(0,a.jsxs)("div",{className:"nft-card",onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)},onClick:function(){return D?r("update"):r("buy")},children:[(0,a.jsx)(j,{props:{marketplaceAddress:s,marketplaceAbi:u,nftAddress:c,tokenName:C,tokenId:m,price:f},isVisible:X,hideModal:function(){return Y(!1)}},"update-listing-modal"),(0,a.jsx)(I,{props:{marketplaceAddress:s,marketplaceAbi:u,nftAddress:c,tokenName:C,tokenId:m,price:f},isVisible:H,hideModal:function(){return K(!1)}},"buying-modal"),(0,a.jsx)("div",{className:"image",children:S?(0,a.jsx)(p(),{src:S,loader:function(){return S},unoptimized:!0,width:300,height:300}):(0,a.jsx)(E.Z.Image,{style:{width:300,height:300},loading:!w,active:!0,className:"nft-skeleton"})}),(0,a.jsxs)("div",{className:"properties",children:[(0,a.jsxs)("div",{className:"name",children:[C," ",(0,a.jsxs)("span",{className:"token-id",children:["#",m]})]}),(0,a.jsx)("div",{className:"description",children:P}),(0,a.jsx)(E.Z,{paragraph:{rows:1},loading:!w,active:!0})]}),(0,a.jsxs)("div",{className:"info",children:[(0,a.jsxs)("div",{className:"price",children:["maticmum"===b.name?(0,a.jsx)(v.T,{name:"matic",width:20,style:"color"}):(0,a.jsx)("i",{className:"fa-brands fa-ethereum"}),A(f)]}),(0,a.jsx)("div",{className:"seller",children:D?"You":"".concat(y.slice(0,6),"...").concat(y.slice(-4))})]}),(0,a.jsx)("div",{className:"actions",children:D?(0,a.jsxs)("div",{className:"action-edit-item",children:[(0,a.jsx)("div",{children:"Update"}),(0,a.jsx)("i",{className:"fa-solid fa-pen"})]}):(0,a.jsxs)("div",{className:"action-buy-item",children:[(0,a.jsxs)("div",{children:["Buy"," ","maticmum"===b.name?(0,a.jsx)(v.T,{name:"matic",width:20,style:"color"}):(0,a.jsx)("i",{className:"fa-brands fa-ethereum"}),A(f)]}),(0,a.jsx)("i",{className:"fa-solid fa-cart-shopping"})]})})]})}var _=n(48036),S=n(7297),T=n(17283);function L(){var e=(0,S.Z)(['\n  {\n    activeItems(\n      first: 1000\n      where: { buyer: "0x0000000000000000000000000000000000000000" }\n    ) {\n      id\n      buyer\n      seller\n      nftAddress\n      tokenId\n      price\n    }\n  }\n']);return L=function(){return e},e}var C=(0,T.Ps)(L()),B=n(3056);function O(e){e.updateApolloClient;var t=(0,x.mA)(),n=t.isDisconnected;t.address;var s=(0,x.yL)().network,i=(0,N.useState)(!1);i[0],i[1];var o=(0,N.useState)(!1);o[0],o[1];var u=(0,N.useState)(!1);u[0],u[1];var d=(0,N.useState)(!1),c=(d[0],d[1]),p=(0,N.useState)(""),l=p[0],m=p[1],f=s.chainId?s.chainId.toString():"31337",y=(0,B.a)(C),h=y.loading,b=(y.error,y.data);return(0,N.useEffect)(function(){_[f]&&m(_[f].NftMarketplace[0]),"goerli"===s.name||"maticmum"===s.name||"arbitrum-goerli"===s.name?c(!1):c(!0)},[s.chainId]),(0,a.jsx)("main",{className:r().main,children:n?(0,a.jsx)("div",{children:"Please connect"}):h||!b?(0,a.jsx)("div",{children:"Loading..."}):b.activeItems.map(function(e){return console.log(b),(0,a.jsx)(M,{nftAttributes:e,marketplaceAddress:l},"".concat(e.nftAddress).concat(e.tokenId))})})}},4774:function(e,t,n){"use strict";n.d(t,{N:function(){return o},p:function(){return i}});var a=n(41799),s=n(69396),r=n(67976);function i(e,t,n,a,s){var i=(0,r.do)({addressOrName:e,contractInterface:t,functionName:n,args:a,enabled:s}),o=i.data,u=i.isError;return(i.isLoading,u)?(console.log("Error reading from contract"),null):o}function o(e,t,n,i,o,u){var d,c=(0,r.PJ)({addressOrName:e,contractInterface:t,functionName:n,args:i,enabled:u}),p=c.config,l=(c.status,c.error,c.refetch),m=(0,r.GG)((0,s.Z)((0,a.Z)({},p),{onSuccess:o.onSuccess,onError:o.onError})),f=m.data,y=m.write,h=(0,r.BX)({hash:null==f?void 0:f.hash,confirmations:1});return{write:y,isLoading:h.isLoading,isSuccess:h.isSuccess,refetch:l}}},67225:function(e){"use strict";e.exports=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenCounter","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getTokenOwner","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"pure","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]')},48036:function(e){"use strict";e.exports=JSON.parse('{"5":{"NftMarketplace":["0x246fe124957897A2eb2E3Edd4d5AB3b726c993C6"],"BasicNft":["0x2EfeEfde77CB1af6310A5137C32840b74873F0a2"]},"80001":{"NftMarketplace":["0xc9F76d13D9695B0956072F150D12d83935f72eB1"],"BasicNft":["0x6e082e54A362d931526DB09b37a38E1747BEfdf0"]},"421613":{"NftMarketplace":["0xc9F76d13D9695B0956072F150D12d83935f72eB1"],"BasicNft":["0x6e082e54A362d931526DB09b37a38E1747BEfdf0"]}}')}},function(e){e.O(0,[643,765,774,888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);